CC		= @CC@
RM		= @RM@
MV		= @MV@
CP		= @CP@
INSTALL		= @INSTALL@
PREFIX		= @prefix@
BIN		= audtool
LDFLAGS		= @LDFLAGS@
CPPFLAGS	= @CPPFLAGS@

# enforce -pthread on systems for now, some systems seem not to pick
# it up automatically. --nenolod
LIBS		= -pthread @LIBS@ @AUDACIOUS_LIBS@
CFLAGS		= -pthread @CFLAGS@ @AUDACIOUS_CFLAGS@

default: all

BASE_SRCS = audtool.c

SRCS = ${BASE_SRCS}

OBJS = ${SRCS:.c=.o}

all: audtool

build: all

audtool: $(OBJS)
	${CC} ${CFLAGS} -o $@ ${OBJS} ${LIBS}

install:
	$(INSTALL) -m 755 -d $(DESTDIR)$(PREFIX)
	$(INSTALL) -m 755 -d $(DESTDIR)$(PREFIX)/bin
	$(INSTALL) -m 755 -c $(BIN) $(DESTDIR)$(PREFIX)/bin

.c.o:
	${CC} ${CPPFLAGS} ${CFLAGS} -c $< -o $@

clean:
	${RM} -f *.o audtool.core core audtool

distclean: clean
	${RM} -f Makefile config.h config.status config.log
