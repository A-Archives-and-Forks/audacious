<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>Notes for Building Audacious on Windows</title>
</head>
<body>

<h2>Notes for Building Audacious on Windows</h2>

<p><em>John Lindgren<br>
December 19, 2020</em></p>

<p>A Makefile and several patch files should accompany this document.</p>

<h3>Set up MSYS2 environment</h3>

<p>Download and run:<br>
<a href="https://repo.msys2.org/distrib/x86_64/msys2-x86_64-20201109.exe">
<tt>https://repo.msys2.org/distrib/x86_64/msys2-x86_64-20201109.exe</tt></a></p>

<p>Accept the default options to install to <tt>C:\msys64</tt>.</p>

<p>Edit <tt>C:\msys64\home\&lt;USER&gt;\.bashrc</tt> and add the following lines:</p>
<blockquote><p><tt>export PATH="$PATH:/C/cmake/bin:/C/libs/bin:/C/aud/bin"<br>
export PKG_CONFIG_PATH="$PKG_CONFIG_PATH:/C/Qt/5.15.2/mingw81_32/lib/pkgconfig:/C/libs/lib/pkgconfig:/C/aud/lib/pkgconfig"<br>
export C_INCLUDE_PATH=/C/libs/include<br>
export CPLUS_INCLUDE_PATH=/C/libs/include<br>
export LIBRARY_PATH=/C/libs/lib</tt></p></blockquote>

<p>In the MinGW shell (MSYS2 MinGW 32-bit, <b>not</b> MSYS2 MSYS):</p>

<blockquote><p><tt>pacman -Syu<br>
pacman -S autoconf automake bison gperf git libtool make patch perl-XML-Parser pkg-config<br>
pacman -S mingw-w64-i686-gcc mingw-w64-i686-gettext mingw-w64-i686-libxml2<br>
pacman -S mingw-w64-i686-atk mingw-w64-i686-cairo mingw-w64-i686-pango<br>
pacman -S mingw-w64-i686-gdk-pixbuf2 mingw-w64-i686-librsvg<br>
pacman -S mingw-w64-i686-flac mingw-w64-i686-libvorbis mingw-w64-i686-libcdio-paranoia<br>
pacman -S mingw-w64-i686-fluidsynth mingw-w64-i686-mpg123 mingw-w64-i686-faad2<br>
pacman -S mingw-w64-i686-wavpack mingw-w64-i686-libmodplug mingw-w64-i686-libbs2b<br>
pacman -S mingw-w64-i686-libsamplerate mingw-w64-i686-libsoxr mingw-w64-i686-neon<br>
pacman -S mingw-w64-i686-libcue mingw-w64-i686-lame</tt></p></blockquote>

<h3>Install CMake</h3>

<p>Download and run:<br>
<a href="https://cmake.org/files/v3.8/cmake-3.8.2-win32-x86.msi">
<tt>https://cmake.org/files/v3.8/cmake-3.8.2-win32-x86.msi</tt></a></p>

<p>Install to <tt>C:\cmake</tt>.</p>

<h3>Install Qt (for Qt builds)</h3>

<p>Download and run (choose another mirror if desired):<br>
<a href="http://qt.mirror.constant.com/archive/online_installers/4.0/qt-unified-windows-x86-4.0.0-online.exe">
<tt>http://qt.mirror.constant.com/archive/online_installers/4.0/qt-unified-windows-x86-4.0.0-online.exe</tt></a></p>

<p>Choose the following install options:<br>
<ul><li>Skip the Qt account login page</li>
<li>Use the default installation path (<tt>C:\Qt</tt>)</li>
<li>Install Qt 5.15.2 for MinGW 8.1.0 32-bit</li></ul></p>

<p>Edit all of the <tt>*.pc</tt> files under <tt>C:\Qt\5.15.2\mingw81_32\lib\pkgconfig</tt>,
replacing the first line <tt>prefix=c:/Users/qt/work/install</tt> with
<tt>prefix=C:/Qt/5.15.2/mingw81_32</tt>.</p>

<h3>Install GTK+</h3>

<p>The Makefile accompanying this document automates the process of building GTK+ from source.</p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd &lt;PATH TO THIS DOCUMENT&gt;<br>
make -j4 gtk</tt></p></blockquote>

<p><i>It may be necessary to run the MinGW shell with administrative privileges
for GTK+ to build successfully.</i></p>

<h3>Install FFmpeg</h3>

<p>Download and unzip to <tt>C:\ffmpeg</tt>:<br>
<a href="http://ffmpeg.org/releases/ffmpeg-4.2.1.tar.xz">
<tt>http://ffmpeg.org/releases/ffmpeg-4.2.1.tar.xz</tt></a></p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/ffmpeg<br>
./configure --prefix=/C/libs --enable-shared --disable-yasm --cpu=i686<br>
make<br>
make install</tt></p></blockquote>

<h3>Install libmms</h3>

<p>Download and unzip to <tt>C:\libmms</tt>:<br>
<a href="http://sourceforge.net/projects/libmms/files/libmms/0.6.4/libmms-0.6.4.tar.gz/download">
<tt>http://sourceforge.net/projects/libmms/files/libmms/0.6.4/libmms-0.6.4.tar.gz/download</tt></a></p>

<p>Apply the recursive patch <tt>libmms-strndup.diff</tt>.</p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/libmms<br>
cp /C/msys32/usr/share/libtool/build-aux/ltmain.sh .<br>
autoreconf<br>
./configure --prefix=/C/libs<br>
make<br>
make install</tt></p></blockquote>

<h3>Install libbinio</h3>

<p>Download and unzip to <tt>C:\libbinio</tt>:<br>
<a href="https://github.com/adplug/libbinio/releases/download/libbinio-1.5/libbinio-1.5.tar.bz2">
<tt>https://github.com/adplug/libbinio/releases/download/libbinio-1.5/libbinio-1.5.tar.bz2</tt></a></p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/libbinio<br>
./configure --prefix=/C/libs<br>
make<br>
make install</tt></p></blockquote>

<h3>Install adplug</h3>

<p>Download and unzip to <tt>C:\adplug</tt>:<br>
<a href="https://github.com/adplug/adplug/releases/download/adplug-2.3.1/adplug-2.3.1.tar.bz2">
<tt>https://github.com/adplug/adplug/releases/download/adplug-2.3.1/adplug-2.3.1.tar.bz2</tt></a></p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/adplug<br>
./configure --prefix=/C/libs<br>
make<br>
make install</tt></p></blockquote>

<h3>Install libsidplayfp</h3>

<p>Download and unzip to <tt>C:\libsidplayfp</tt>:<br>
<a href="https://sourceforge.net/projects/sidplay-residfp/files/libsidplayfp/2.0/libsidplayfp-2.0.1.tar.gz/download">
<tt>https://sourceforge.net/projects/sidplay-residfp/files/libsidplayfp/2.0/libsidplayfp-2.0.1.tar.gz/download</tt></a></p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/libsidplayfp<br>
./configure --prefix=/C/libs<br>
make<br>
make install</tt></p></blockquote>

<h3>Install Audacious</h3>

<p>Download and unzip to <tt>C:\audacious</tt>:<br>
<a href="https://distfiles.audacious-media-player.org/audacious-3.8.tar.bz2">
<tt>https://distfiles.audacious-media-player.org/audacious-3.8.tar.bz2</tt></a></p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/audacious<br>
./configure --prefix=/C/aud<br>
make<br>
make install</tt></p></blockquote>

<h3>Install Audacious Plugins</h3>

<p>Download and unzip to <tt>C:\audacious-plugins</tt>:<br>
<a href="https://distfiles.audacious-media-player.org/audacious-plugins-3.8.tar.bz2">
<tt>https://distfiles.audacious-media-player.org/audacious-plugins-3.8.tar.bz2</tt></a></p>

<p>In the MinGW shell:</p>
<blockquote><p><tt>cd /C/audacious-plugins<br>
./configure --prefix=/C/aud<br>
make<br>
make install</tt></p></blockquote>

</body>
</html>
